---
title: 安卓
date: 2023-01-30 08:22:52
tags:
cover: https://img1.baidu.com/it/u=3590854812,1942828444&fm=253&fmt=auto&app=120&f=JPEG?w=660&h=396
---



## 一、资源 res 项目

### (一) drawable ———– 一般用来放置图片资源

#### 1. drawable

#### 2.drawable-v24

### (二) layout ———– 用来放布局文件

 如 activity_main.xml

### (三) mipmap ———- 一般用来放应用图标

 不同后缀在屏幕适配上处理不同

### (四) values ———– 用来放颜色、样式、字符串等











## 二、控件

### （一）TextView

#### 1).基本属性

##### 1.id 名字 ———– 用来获取 TextView 对象

 a. 设置名字 ： android:id=”@+id/ name “

 b. 获取TextView 对象 ： View textview = findViewById(R.id.name);

##### 2. layout_width / layout_height 宽高

 值：a. match_parent 跟容器匹配

 b. wrap_content 根据内容自适应

 c. 自定义大小 : 如 200dp

##### 3. text = “文本” 设置文本内容

 或者自定义内容再用名字指向

[![image-20220331172220322](C:/Users/banjinbaliang/AppData/Roaming/Typora/typora-user-images/image-20220331172220322.png)](file:///C:/Users/banjinbaliang/AppData/Roaming/Typora/typora-user-images/image-20220331172220322.png)

 text = “@String / t1”

##### 4. textSize = “20sp” 设置字体大小（单位sp)

##### 5. textColor = “#00000000”

 1 2位设置透明度（00纯透明 FF不透明）

 3 4位设置红

 5 6位设置绿

 7 8位设置蓝

 或者设置为自定义颜色对象

 textColor=”@color / myColor”

##### 6. textStyle = “风格值”

 normal 正常

 italic 斜体

 bold 加粗

##### 7. background = “#ff000000” 设置TextView背景为颜色

 或者设置为自定义颜色值：

 **textColor=”@color / myColor”**

##### 8. 字体阴影效果

```
JAVA
shadowColor="@color/black"   设置字体阴影颜色
android:shadowRadius="3.0"   设置阴影模糊程度
android:shadowDx="20"        设置阴影水平偏移量
android:shadowDy="30"        设置阴影竖直偏移量
```

##### 9.TextView 跑马灯效果

 ellipsize=”marquee” 设置内容效果为跑马灯效果

 marqueeRepeatLimit=”marquee_forever” 字幕滚动次数

 singleLine=”true” 内容单行显示

 focusable=”true” 是否获取焦点

 focusableInTouchMode=”true” 控制视图在触摸下是否获取焦点

 但仍没有跑马灯效果，因此

###### 1.可以自定义 TextView ,设置可以获取焦点，并使用

```
JAVA

// 自定义 TextView 
public class myTextView extends AppCompatTextView {
    public myTextView(Context context) {
        super(context);
    }
    public myTextView(Context context, @Nullable AttributeSet attrs) {
        super(context, attrs);
    }
    public myTextView(Context context, @Nullable AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
    }
    
    @Override       // 重写获取焦点
    public boolean isFocused() {
        return true;
    }
}
```

 使用自定义TextView

 <com.example.excelitem.myTextVie·w … >

 </com.example.excelitem.myTextView>

###### 2.加一句焦点获取请求



##### 10.TextView功能总结

```
JAVA

<TextView
    // 基本属性
    android:id="@+id/tv"
    android:layout_width="240dp"
    android:layout_height="match_parent"
    android:background="@color/white"
    android:gravity="bottom"
    android:text="@string/t1"
    android:textColor="#ffff0000"
    android:textSize="40sp"
    android:textStyle="normal"
    android:shadowColor="@color/black"
    // 阴影设置
    android:shadowRadius="3.0"
    android:shadowDx="0"
    android:shadowDy="0"
    // 文字跑马灯效果
    android:singleLine="true"
    android:ellipsize="marquee"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:marqueeRepeatLimit="marquee_forever">
   <requestFocus/>
        
    ></TextView>
```

### （二）Button （ extends TextView ）

#### 1）基本属性 ——- 与 TextView 类似

```
JAVA

<Button
    android:layout_width="200dp"
    android:layout_height="100dp"
    android:text="Buntton1"
    android:background="@Color/black"
    android:layout_marginXxxx="677dp"   //按钮距离
        // 前景色
    android:foreground="@color/white"
    >
</Button>
```

### 2) StateListDrawable —– 为按钮设置不同状态（按钮按下…）时的背景

```
JAVA

            //     drawable 下新建
// 新建选择器   设置不同状态时显示不同的图片资源
<selector xmlns:android="http://schemas.android.com/apk/res/android">
       // 按下状态
   <item android:drawable="@drawable/ic_baseline_accessibility_new_24" android:state_pressed="true"></item>
       // 默认状态
   <item android:drawable="@drawable/ic_baseline_account_balance_24"></item>
</selector>
JAVA

         // 按钮中添加选择器
<Button
    android:layout_width="200dp"
    android:layout_height="100dp"
    android:text="Buntton1"
        
    // 添加选择器
    android:background="@drawable/btn_select"
    >
</Button>
```

### 3）按钮事件处理

```
JAVA

      // 在java方法中设置事件处理  
               // 点击事件
 btn.setOnClickListener(new View.OnClickListener() {
     @Override
     public void onClick(View view) {
         Log.e(TAG,"onClick");
     }
 });
                // 长按事件
 btn.setOnLongClickListener(new View.OnLongClickListener() {
     @Override
     public boolean onLongClick(View view) {
         Log.e(TAG,"onLongClick");
         return false;
     }
 });

               // 触摸事件
 btn.setOnTouchListener(new View.OnTouchListener() {
     @Override
     public boolean onTouch(View view, MotionEvent motionEvent) {
         Log.e(TAG,"onTouch");
         return false;
     }
 });



// 在布局文件中设置事件处理  
<Button
       android:id="@+id/btn"
       android:layout_width="200dp"
       android:layout_height="100dp"
       android:text="Buntton1"
       android:background="@drawable/btn_select"
       
       // 设置事件处理
       android:onClick="lecoOnClick"
       // 会生成一个事件处理函数 lecoOnClick()代替onClick()
       >
   </Button>
```

#### 1.点击事件onClick()、长按事件onLongClick()、触摸事件onTouch()之间的调用执行（系统）

 当长按事件返回真则不会调用执行点击事件

### （三）EditText（ extends TextView ）—— 可编辑文本框

### 1) 主要属性

 **hint = “提示内容” 输入提示**

 **textColorHint 提示文字颜色**

 **inputType 输入类型**

 **background 背景**

 **drawableLeft (Bottom 等)=”@drawable/+指定图片” 指定方位添加图片，如：**

 android:drawableLeft=”@drawable/ic_baseline_account_balance_24”

[![image-20220331214304307](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)](file:///C:/Users/banjinbaliang/AppData/Roaming/Typora/typora-user-images/image-20220331214304307.png)

 **drawablePadding=”30dp” 设置图片与输入内容的间距**

 **paddingXxxx=”20dp” 设置整体内容与指定方位边框和的间距**

### 2）信息获取 ——– 一般结合按钮实现

### （四）ImageView（ extends View ）—— 图像视图

#### 1)基本属性

```
JAVA

<ImageView
        android:id="@+id/imag1"         控件id
        android:layout_width="200dp"    宽
        android:layout_height="100dp"   高
        android:src="@drawable/ic_baseline_account_balance_24" 图片资源
        android:scaleType="center"      图片缩放类型
        android:maxHeight="200dp"       最大高度
        android:maxWidth="40dp"         最大宽度
        android:adjustViewBounds="true" 调整边界
            >
        </ImageView>
```

### （五）ProgressBar（ extends View ）—— 进度条

#### 1）基本属性

```
JAVA

<ProgressBar
    android:id="@+id/bar1"           id 
    android:layout_width="200dp"     宽 
    android:layout_height="50dp"     高
    android:max="@android:integer/config_longAnimTime"
    android:progress="@android:integer/config_longAnimTime"
    android:indeterminate="true"     true则不精确显示进度
    style="?android:attr/progressBarStyleHorizontal"  进度条风格（水平进度条）
    >
</ProgressBar>
```

#### 2）按钮操作进度条 ProgressBar

 点击一次进度条加10 模拟下载

```
JAVA

                  //      新建进度条
<ProgressBar
    android:id="@+id/bar1"
    android:layout_width="200dp"
    android:layout_height="50dp"
    android:max="100"
    style="?android:attr/progressBarStyleHorizontal"
    >
</ProgressBar>
                  //     新建控制按钮
<Button
    android:id="@+id/b1"
    android:text="模拟下载"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>
        
                //  给按钮添加事件监听
  Button b =  findViewById(R.id.b1);
  ProgressBar pb = findViewById(R.id.bar1);

  b.setOnClickListener(new View.OnClickListener() {
           @Override
           public void onClick(View view) { // 如果被点击则加10
               int pre = pb.getProgress();
               pre +=10;
               pb.setProgress(pre);
           }
       });
```

### （六）Notification / NotificationManager（ extends View ）—— 通知 / 通知管理管理

#### 一）使用方法:

##### A:

 a. NotificationManager 是通知管理类，是由系统维护的服务，以单例的方式获得，因此一般不直接实例化。

 b. 在 Activity 中， Activity.getSystemService(String)获得NotificationManager对象

 c. Activity.getSystemService(String) 通过android系统级服务句柄，返回对应的对象

 d. 参数传 Context.NOTIFICATION_SERVICE即可得到 NotificationManager 对象

##### B:

 a. 获取 NotificationManager 对象后，使用 NotificationCompat 类的 Builder 构造器获得 Notification 对象，可保证程序在所有版本上正常工作

 b. android 8.0 新增 “通知渠道” ，如没 a 则无法工作

#### 二）实例

##### 1.基本属性 / 功能设置

```
JAVA

                      // 定义全局通知 / 通知管理器 变量
private NotificationManager nm;
private Notification notifi;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    
    nm = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
    // 如果版本为 8.0 则设置通知渠道
    if(Build.VERSION.SDK_INT>=Build.VERSION_CODES.O){
            // 通知渠道
        NotificationChannel cha = new NotificationChannel("ni", "测试通知",NotificationManager.IMPORTANCE_HIGH);

        nm.createNotificationChannel(cha);
    }
    
    // 设置通知属性
    notifi = new NotificationCompat.Builder(this,"ni")
            .setContentTitle("官方通知")   // 通知标题
            .setContentText("gddb")       // 通知内容主题
            .setSmallIcon(R.drawable.ic_baseline_accessibility_new_24)// 图标
            .build();

    // 用按钮模拟通知
    Button bt = findViewById(R.id.b2);
    bt.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            // 推送通知
            nm.notify(1,notifi);
        }
    });
```

##### 1.常见方法

```
JAVA

notifi = new NotificationCompat.Builder(this,"ni")
        .setContentTitle("官方通知")  // 设置标题
        .setContentText("gddb")      // 设置文本内容
        .setSmallIcon(R.drawable.ic_baseline_accessibility_new_24)
        .setColor(Color.parseColor("#ff0000"))                  // 设置小图标颜色
.setLargeIcon(BitmapFactory.decodeResource(getResources(),R.drawable.ic_baseline_accessibility_new_24))              // 设置大图标
       .setAutoCancel(true)              // 点击后自动清楚
                           // 通知被创建时
        .build();
```

##### 2. 实现点击通知后跳转

```
JAVA

         //   创建新活动 Activity
public class myNotificationActicity extends Activity{

    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Log.e("TAG", "onCreate: 进入通知跳转");
    }
}

             //  设置通知跳转意图 
Intent intent = new Intent(this, myNotificationActicity.class);
PendingIntent ptent = PendingIntent.getActivity(this, 0, intent, 0);

notifi = new NotificationCompat.Builder(this,"ni")
                .setContentIntent(ptent)
                .setAutoCancel(true)
                .build();
```

### （七）Toolbar（ extends ViewGroup）—— 工具栏

#### 一）基本属性

```
JAVA

<androidx.appcompat.widget.Toolbar
    android:id="@+id/tb"     //   id 
    android:layout_width="fill_parent"  // 宽
    android:layout_height="100dp"       // 高
    app:navigationIcon="@drawable/ic_baseline_accessibility_new_24" // 导航图标
    android:background="#ffff00"   // 背景色
    app:title="标题"                // 标题
    app:titleTextColor="#ffff0000"  // 标题颜色
    app:titleMarginStart="25dp"     // 标题开始距离

    app:subtitle="子标题"            // 子标题 
    app:subtitleTextColor="#ff00ff00"  // 子标题颜色
    app:logo="@drawable/ic_baseline_account_balance_24"  // logo
    />
```

### (八）AlertDialog（ extends AppCompatDialog implements DialogInterface ）—— 对话框

#### 一）实现方式

##### a. 通过 AlertDialog.Builder 构造器构造

```
JAVA
           // 1. 生成构造器
AlertDialog.Builder builder = new AlertDialog.Builder(this);
                        //  获取自定义布局备用
View dview = getLayoutInflater().inflate(R.layout.dialog_view, null);
```

##### b. 通过 构造器 设置参数实现，设置完毕后，create() 返回 AlertDialog 对象

```
JAVA

          // 2.利用构造器设置对话框属性
 builder.setIcon(R.mipmap.icon_resource)   // 设置图标
        .setTitle("对话框")                 // 设置标题
        .setMessage("今天天气")             // 设置内容
         .setView(dview)                  // 设置布局
         .setPositiveButton("确定", new DialogInterface.OnClickListener() {
             @Override
             public void onClick(DialogInterface dialogInterface, int i) {
                 Log.e(tag, "onClick: 点击确定");
             }
         })                               // 给对话框添加按钮并设置监听
         .setNegativeButton("取消", new DialogInterface.OnClickListener() {
             @Override
             public void onClick(DialogInterface dialogInterface, int i) {
                 Log.e(tag, "onClick: 点击取消");
             }
         })                              // 给对话框添加按钮并设置监听
         .setNeutralButton("中间", new DialogInterface.OnClickListener() {
             @Override
             public void onClick(DialogInterface dialogInterface, int i) {
                 Log.e(tag, "onClick: 点击中间");
             }
         });                             // 给对话框添加按钮并设置监听

         
       // 3.返回 AlertDialog 对象
AlertDialog alertDialog = builder.create();
```

##### c. 用 AlertDialog类 的 show() 方法显示对话框

```
JAVA
   // 4.显示对话框
alertDialog.show();
```

### (九）PopupWindow —— 弹窗

#### 一）常用方法

```
JAVA

setContentView( View v )                       // 设置 PopupWindow 的View
setBackgroundDrawable( Drawable background)   //设置背景
showAsDropDown(View v )                       //在 v 的正左下方显示 
showAsDropDown(View v ,100,100);              //在 v 的带偏移显示
setFocusable( true )                           //是否获取焦点
setAnimationStyle();                          // 设置加载动画
setTouchable();                               // 设置触摸使能
setOutsideTouchable();                        // 设置PopupWindow外触摸使能

 dismiss()                                    //关闭弹窗
```

### (十）ListView ————- 列表

 ListView 初始为一个框架，属于一种布局，具体需要设置组件等 (如只显示一个文本内容 TextView )

#### 一）设置ListView里的布局文件，包括组件框架

```
JAVA

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    >

    <TextView
        android:id="@+id/tv"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:textSize="30sp"/>

</LinearLayout>
```

#### 二） Activity添加 ListView 框架

```
JAVA

<RelativeLayout
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/t"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:orientation="vertical"
    xmlns:android="http://schemas.android.com/apk/res/android"
   >

    <ListView
        android:id="@+id/ltv"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>

</RelativeLayout>
```

#### 三）新建需要显示的数据类型

```
JAVA

public class ExcelData {
    String item;

    public ExcelData(String item) {
        this.item = item;
    }

    public String getName() {
        return item;
    }
}
```

#### 四）新建数据适配器构建数据桥梁

```
JAVA

public class ExcelAdapter extends BaseAdapter {
    List<ExcelData> ldata;  //数据类型
    Context context;

    public ExcelAdapter(List<ExcelData> ldata, Context context) {
        this.ldata = ldata;
        this.context = context;
    }

    @Override    // 获取数据个数
    public int getCount() {
        return ldata.size();
    }

    @Override    // 获取指定位置的对象
    public Object getItem(int position) {
        return null;
    }

    @Override    // 获取指定位置编号
    public long getItemId(int position) {
        return position;
    }

    @Override     // 获取指定位置视图对象
    public View getView(int position, View convertView, ViewGroup parent) {
        if(convertView==null){
            convertView = LayoutInflater.from(context).inflate(R.layout.listview_item,parent,false);;
        }

        // 设置 ListView 指定位置的 TextView 文本内容 并返回
        TextView textView = convertView.findViewById(R.id.tv);
        textView.setText(ldata.get(position).getName());

        return convertView;
    }
}
```

#### 五）Activity 设置数据

```
JAVA

public class MainActivity extends AppCompatActivity {

    OperatorExcel operatorExcel;
    
    List<ExcelData> ldata = new ArrayList<>();// ListView 显示的数据类型集合

    @Override
    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);


            //operatorExcel = new OperatorExcel("./app/files/D5.xls");

         //生成添加数据集合
            for(int i=1;i<=10;i++)
            {
                ExcelData d = new ExcelData("Banjin" + i);
                ldata.add(d);
            }

        // 新建数据适配器并添加数据
          ExcelAdapter adp = new ExcelAdapter(ldata, this);
        
        // 获取 ListView 对象，并设置
          ListView listview = findViewById(R.id.ltv);
          listview.setAdapter(adp);
       // 设置点击对应 ListView 项目监听
        listview.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
                Log.e("leo", "onItemClick: "+i);
            }
        });

    }


}
```

### (十一）ViewPager ————- 可滑动页面

 a.ViewPager 里面的每一张页面包含布局，因此需要创建滑动页面布局文件

 b. ViewPager 初始只是一个框架，需要通过数据适配器添加View

#### 一）创建滑动页面布局文件

```
JAVA

<LinearLayout
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/t"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:orientation="vertical"
    xmlns:android="http://schemas.android.com/apk/res/android"
    >

    <TextView
        android:layout_width="200dp"
        android:layout_height="100dp"
        android:text="Lyaout1"
        android:textSize="50sp"
        android:layout_gravity="center_horizontal"
        />
</LinearLayout>

<LinearLayout
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/t"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:orientation="vertical"
    xmlns:android="http://schemas.android.com/apk/res/android"
    >

    <TextView
        android:layout_width="200dp"
        android:layout_height="100dp"
        android:text="Lyaout2"
        android:textSize="50sp"
        android:layout_gravity="center_horizontal"
        />
</LinearLayout>
            
<LinearLayout
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/t"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:orientation="vertical"
    xmlns:android="http://schemas.android.com/apk/res/android"
    >

    <TextView
        android:layout_width="200dp"
        android:layout_height="100dp"
        android:text="Lyaout3"
        android:textSize="50sp"
        android:layout_gravity="center_horizontal"
        />
</LinearLayout>
```

#### 二）活动页面添加 ViewPager 组件框架

```
JAVA

<LinearLayout
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/t"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:orientation="vertical"
    xmlns:android="http://schemas.android.com/apk/res/android"
   >


   <androidx.viewpager.widget.ViewPager
       android:id="@+id/vp"
       android:layout_width="match_parent"
       android:layout_height="match_parent"
       />
</LinearLayout>
```

#### 三）新建数据适配器转换数据

```
JAVA

public class MyAdapter extends PagerAdapter {

    private List<View> listView;

    public MyAdapter(List<View> listView) {
        this.listView = listView;
    }
    @Override
    public int getCount() {
        return listView.size();
    }
    @NonNull
    @Override
    public Object instantiateItem(@NonNull ViewGroup container, int position) {
        container.addView(listView.get(position),0);
        return listView.get(position);
    }
    @Override
    public boolean isViewFromObject(@NonNull View view, @NonNull Object object) {
        return view==object;
    }
    @Override
    public void destroyItem(@NonNull ViewGroup container, int position, @NonNull Object object) {
        container.removeView(listView.get(position));
    }
}
```

#### 四）活动添加数据

```
JAVA

public class MainActivity extends AppCompatActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);


        // 布局渲染器
        LayoutInflater lf = getLayoutInflater().from(this);

        // 渲染获取滑动布局
        View v1 = lf.inflate(R.layout.layout1,null);
        View v2 = lf.inflate(R.layout.layout2,null);
        View v3 = lf.inflate(R.layout.layout3,null);
        // 添加布局页面
        List<View> ls = new ArrayList<>();
        ls.add(v1);
        ls.add(v2);
        ls.add(v3);

        // 新建数据适配器存储数据
        MyAdapter myA = new MyAdapter(ls);
        
        // 获取ViewPager id ，并添加滑动页面
        ViewPager Viewp = findViewById(R.id.vp);
        Viewp.setAdapter(myA);
        

    }
    public void ToActivity1(View view){
        Intent intent = new Intent(this, Activity1.class);

        startActivity(intent);
    }

}
```









## 三、布局 Layout

 数据超出屏幕宽度或高度时设置滑动展示效果，实现布局

 **A. 上下滑动 ScrollView**

```
JAVA

<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:scrollbars="none"
    >

   // 添加自己的布局
        
        
</ScrollView>
```

 **B. 左右滑动 HorizontalScrollView**

```
JAVA

<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="5dp"
    >

   // 添加自己的布局

  

</HorizontalScrollView>
```

### （一）LinerLayout ———— 线性布局

#### 一）基本属性

```
JAVA

// 父布局
<LinearLayout  xmlns:app="http://schemas.android.com/apk/res-auto" 
    
    android:layout_width="match_parent"            // 宽
    android:layout_height="match_parent"           // 高
    android:orientation="vertical"                 // 布局中组件对齐方式
    android:gravity="center"                       // 组件所包含子元素对齐方式
    android:divider="@color/black"                 // 分割线
    android:showDividers="middle"                  // 显示分割线及位置
    android:dividerPadding="20dp"                  // 分割线距离
    android:layout_weight="1"                      // 剩余空间划分比例 
    xmlns:android="http://schemas.android.com/apk/res/android">

        // 子布局
    <LinearLayout
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:background="#ffff0000"
        android:layout_gravity="bottom"         // 该组件在父组件中的对齐方式
        />

       // 子布局
    <LinearLayout
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:background="#ffff0000"
        />
</LinearLayout>
```

### （二）RelativeLayout ———— 相对布局

#### 一）根据父容器定位

 layout_alignParentXxxx 左、右、顶、底 对齐

 layout_centerHorizontal 水平居中

 layout_centerVertical 垂直居中

 layout_centerInParent 中间位置

#### 二）根据兄弟容器定位

 layout_toRightOf=”@+id/r1” 放在 r1 右边

 layout_toLeftOf=”@+id/r1” 放在 r1 左边

 layout_above=”@+id/r1” 放在 r1 上面

 layout_below=”@+id/r1” 放在 r1 左边

 layout_alignXxxx 对齐 r1 指定方位的边界

#### 三）通用属性

 layout_margin 设置上下左右偏移

 layout_marginXxxx 设置指定方位偏移

 padding 内部组件的边距

### （三）FrameLayout ———– 帧布局

 **每个容器均从父容器的左上角开始绘制，不同容器之间会产生覆盖**

#### 一）常见属性

 foreground=”#ffff00” 设置前景
​ foregroundGravity=”center” 设置前景位置

### （四）TableLayout ———– 表格布局

 **一般结合 TableRow 使用，在同一个 TableRow 下的组件都在同一行，超出容器范围的组件不显示**

#### 一）常见属性

 collapseColumns=”列号” 隐藏指定列

 stretchColumns=”列号” 指定列在有剩余空间下可拉伸

 shrinkColumns=”列号” 指定列在无剩余空间下可收缩

 layout_column = “列号” 指定在某列显示

 layout_span=”列数” 指定横跨几列

```
JAVA

TableLayout tbl = findViewById(R.id.tb);
    
TableRow tr1 = new TableRow(this);
        
tbl.addView(tr1, ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);

TextView tv11 = new TextView(this);
        
tr1.addView(tv11, ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT); // Can give width and height in numbers also.

TextView cell = new TextView(this);
               
tr1.addView(cell, ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);
```

### （五）GridLayout ———– 网格布局

 不用结合 TableRow , 行、列均可合并

#### 一）常见属性

 orientation=”horizontal / vertical” 水平 / 垂直显示

 rowCount 设置行显示个数

 columnCount 设置列显示个数

#### 二）子控件属性

 layout_row=”行号” 指定显示在某行

 layout_rowSpan=”2” 纵向跨几行

 layout_rowWeight 纵向空间分配

 layout_clounm=”列号” 指定显示在某列

 layout_columnSpan=”2” 横向跨几列

 layout_clounmWeight 横向空间分配

### （六）ConstraintLayout———- 约束布局

### 三、动画

#### （一）补帧动画

```
JAVA

           // 添加动画里包含的图片，生成图片集合
<animation-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/ic_baseline_account_balance_24" android:duration="120"/>
    <item android:drawable="@drawable/ic_baseline_accessibility_new_24" android:duration="120"/>
    <item android:drawable="@drawable/img" android:duration="120"/>
</animation-list>
        
        
        //  布局里添加图片集合
<RelativeLayout
    android:id="@+id/t"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:orientation="vertical"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="@drawable/frame">
    
</RelativeLayout>
        
       //  设置动画效果 
public class MainActivity extends AppCompatActivity {
    private boolean f = true;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        RelativeLayout viewById = findViewById(R.id.t);
        AnimationDrawable background = (AnimationDrawable)viewById.getBackground();
        viewById.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                if(f){
                    background.start();
                    f = false;
                }
                else {
                    background.stop();
                    f = true;
                }
            }
        });
    }
}
```

## 四、Android 组件

### (一）Activity

 概述： 提供一个屏幕，用来与用户交互实现功能

#### 一）Activity 的跳转

##### 1.添加新的 Activity 及布局文件

```
JAVA

           // 1. 新建 Activity
public class MainActivity2 extends AppCompatActivity {
    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mainactivity2_layout);
    }
}

          // 2.  添加布局
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="myMainActivity2"
        android:textColor="#ff00ff"
        android:textSize="50sp"
        android:paddingTop="300dp"
        />

        // 按钮实现跳转监听
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="返回"
        android:background="#ffff00"
        android:onClick="BackMainActivity"
        />
</LinearLayout>
```

##### 2. 在清单文件 AndroidManifest.xml 中注册新 Activity

```
JAVA
    <!--- 注册 activity 2 -->
<activity android:name=".MainActivity2"/>
```

##### 3. 添加按钮实监听跳转

```
JAVA

public class MainActivity extends AppCompatActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
    public void Startactivity2(View view){
        startActivity(new Intent(this,MainActivity2.class));
    }
}
```

#### 二）Activity 的生命周期

##### 一) 基本生命周期函数

 onCreate( ) 创建 (组件、布局的初始化)

 onStart( ) 启动

 onRestart( ) 重新启动

 onResume( ) 画面展示渲染

 onPause( ) 暂停

 onStop( ) 停止

 onDestroy( ) 销毁

##### 二) 基本生命周期函数的执行

 1. 启动 app

[![image-20220403110534108](C:/Users/banjinbaliang/AppData/Roaming/Typora/typora-user-images/image-20220403110534108.png)](file:///C:/Users/banjinbaliang/AppData/Roaming/Typora/typora-user-images/image-20220403110534108.png)

 2. 回到桌面

[![image-20220403110715034](C:/Users/banjinbaliang/AppData/Roaming/Typora/typora-user-images/image-20220403110715034.png)](file:///C:/Users/banjinbaliang/AppData/Roaming/Typora/typora-user-images/image-20220403110715034.png)

 3. 再次打开

[![image-20220403110814118](C:/Users/banjinbaliang/AppData/Roaming/Typora/typora-user-images/image-20220403110814118.png)](file:///C:/Users/banjinbaliang/AppData/Roaming/Typora/typora-user-images/image-20220403110814118.png)

 4. 跳转到另外一个 Activity

[![image-20220403111016124](C:/Users/banjinbaliang/AppData/Roaming/Typora/typora-user-images/image-20220403111016124.png)](file:///C:/Users/banjinbaliang/AppData/Roaming/Typora/typora-user-images/image-20220403111016124.png)

 5.从 app 返回退出

[![image-20220403111209572](C:/Users/banjinbaliang/AppData/Roaming/Typora/typora-user-images/image-20220403111209572.png)](file:///C:/Users/banjinbaliang/AppData/Roaming/Typora/typora-user-images/image-20220403111209572.png)



### (二）Fragment

###### 1.*可以把他看成一个小型的Activity，又称Activity片段！想*

###### 2.用Fragment 我们可以把屏幕划分成几块，然后进行分组，进行一个模块化的管理！从而

###### 3.可以更加方便的在 运行过程中动态地更新Activity的用户界面！

###### 4.另外Fragment并不能单独使用，他需要嵌套在Activity 中使用，

###### 5.拥有自己的生命周期，但是还是会受到宿主Activity的生命周期的影响，比如Activity 被destory销毁了，他也会跟着销毁！

#### 一） Fragment 的生命周期

[![img](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)](https://www.runoob.com/wp-content/uploads/2015/08/31722863.jpg)

#### 二） Fragment 的使用

```
JAVA

         /********** 1. 创建 Fragment 类 **************/
public class BlankFragment extends Fragment {

    private View root;      // 获取当前 Fragment 的父容器
    private TextView textv; // 设置文本内容
    private Button bt;       // 用于操作文本内容

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        if(root ==null){
            // 如果父容器为空，则从布局文件layout里扫描
            root = inflater.inflate(R.layout.fragment_blank, container, false);
        }

        textv = root.findViewById(R.id.tv);
        bt = root.findViewById(R.id.bt);
        // 点击按钮则修改文本内容
        bt.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                textv.setText("Yes");
            }
        });
        //返回父容器
        return root;
    }
}
     /********** 2. 设置 Fragment 组件 **************/
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".BlankFragment">

    <!-- TODO: Update blank fragment layout -->
    <TextView
        android:id="@+id/tv"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:text="@string/hello_blank_fragment"
        android:textSize="40sp"
        />
    
    <Button
        android:id="@+id/bt"
        android:layout_width="200dp"
        android:layout_height="100dp"
        android:background="#ff00ff"
        android:text="bt"
        android:textSize="100sp"
        />
</LinearLayout>

     /********** 3.静态添加 Fragment  **************/
 <fragment android:name="com.example.excelitem.BlankFragment"
        android:id="@+id/f1" // id 必须有
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />
            
    /********** 4.动态添加 Fragment  **************/
public void replace(Fragment blankFragment) {
    FragmentManager FragManager = getSupportFragmentManager();
       // 新建 Fragment 事件 fTransaction
    FragmentTransaction fTransaction =FragManager.beginTransaction();
       // 用 blankFragment 添加到 Fragment 管理站，并替换原栈顶 Fragment, (不会将原来的出栈)
       // 事件 fTransaction 具体操作
    fTransaction.replace(R.id.f1, blankFragment);
       // 将blankFragment 添加到Fragment 管理栈
    fTransaction.addToBackStack(null);
       // 事件提交
    fTransaction.commit();
    }
}
```

### (三）Service

 app 后台进行下载、上传等服务工作, 打开对应活动则自动创建并执行 Service

#### 一） Service 的生命周期函数

 onCreate()

 onStartCommand（）

 onBind（）

 onUnbind（）

 onDestroy()

#### 二） Service 的创建

```
JAVA

            // 创建 Service
public class MyService extends Service {
   
}
            // 注册 Service
   <service android:name=".MyService"/>
```

#### 三） Service 的启动与停止

```
JAVA

public void startService(View view){
    startService(new Intent(this,MyService.class));
}
public void stopService(View view){
    stopService(new Intent(this,MyService.class));
}
```

### (四）bindService

 绑定于对应的 Activity , Activity 关闭则 bindService 也销毁

```
JAVA

          // 绑定 Service
@Override
public IBinder onBind(Intent intent) {
    Log.d(TAG, "----->onBind");
    return null;
}

           // 解绑 Service
@Override
public boolean onUnbind(Intent intent) {
    Log.d(TAG, "----->onUnbind");
    return super.onUnbind(intent);
}
```

实现 Activity 关闭时解绑 Service

```
JAVA

public class MainActivity extends AppCompatActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main); 
    }
    
    // 创建绑定桥梁 connection 
    private ServiceConnection connection = new ServiceConnection() {
        @Override
        public void onServiceConnected(ComponentName componentName, IBinder iBinder) {

        }

        @Override
        public void onServiceDisconnected(ComponentName componentName) {

        }
    };

     // 实现按钮触发绑定
     public void bindService(View view){
        bindService(new Intent(this,MyService.class),connection, Context.BIND_AUTO_CREATE);
    }
    
    // 实现 Activity 关闭时解绑 Service
    @Override
    protected void onDestroy() {
        super.onDestroy();
        unbindService(connection);
    }
}
```

 关闭 Activity 时 效果 ：

[![image-20220403130540735](C:/Users/banjinbaliang/AppData/Roaming/Typora/typora-user-images/image-20220403130540735.png)](file:///C:/Users/banjinbaliang/AppData/Roaming/Typora/typora-user-images/image-20220403130540735.png)

### (五）Reciver

#### 一）静态 / 动态 注册广播接收者

```
JAVA

            // 1. 创建广播接收者
public class MyReceiver extends BroadcastReceiver {
    private final String TAG = "leo";
    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d(TAG, "onReceive:接收者");
    }
}
           // 2. 创建注册标记
public interface ActionUtils {
    String ACTION_FLAG = "myreciver";
}


          // 3. 注册广播接收者
                 <!--   静态注册   -->
        <receiver android:name=".MyReceiver" android:exported="true">
            <intent-filter>
                  <action android:name="myreciver"/>
            </intent-filter>
        </receiver>
               
                      
                   // java 动态注册
                      MyReceiver myReceiver = new MyReceiver();
                      IntentFilter itf = new IntentFilter();
                      itf.addAction(ActionUtils.ACTION_FLAG);
                      registerReceiver(myReceiver,itf);


         // 4. 发送广播给接收者
public void sendAction(View view){
        Intent intent = new Intent();
        intent.setAction(ActionUtils.ACTION_FLAG);
        sendBroadcast(intent);
    }     
```

[![image-20220403135221470](C:/Users/banjinbaliang/AppData/Roaming/Typora/typora-user-images/image-20220403135221470.png)](file:///C:/Users/banjinbaliang/AppData/Roaming/Typora/typora-user-images/image-20220403135221470.png)







## 五、数据及传输

### （一）常用数据适配器 Adapter

[![image-20220403171552490](C:/Users/banjinbaliang/AppData/Roaming/Typora/typora-user-images/image-20220403171552490.png)](file:///C:/Users/banjinbaliang/AppData/Roaming/Typora/typora-user-images/image-20220403171552490.png)

### （二）BaseAdapter ———- 基本适配器

#### 一）常用方法

 int getCount( ) 获取Item条目数

 Object getItem( pos ) 获取pos 位置的 Item 对象

 long getItem( pos ) 获取pos 位置的 Item对象 id

 View getView( pos, convretView ,parent) 获取pos 位置的 Item 视图

## 六、Activity 数据传输 ——— Intent

### （一）基本数据类型传输 —- MainActivity –> Activity1

#### 一）单个传输

```
JAVA

            // 1. 传输数据
public void ToActivity1(View view){
    Intent intent = new Intent(this,Activity1.class);
    intent.putExtra("name","Ban");

    startActivity(intent);
}

          //  2.接收数据
protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity1);

        Intent intent = getIntent();
        String name = intent.getStringExtra("name");

        Toast.makeText(this,"name : "+name,Toast.LENGTH_SHORT).show();
    }
```

#### 二）Bundle 封装数据传输 —- 拆箱自动执行，不需手动拆开Bundle

```
JAVA

        /************ 1. 传输数据 *************/
public void ToActivity1(View view){
    
             // 新建跳转意图
    Intent intent = new Intent(this,Activity1.class);
             // 新建 Bundle 包装数据
    Bundle bundle = new Bundle();
            //  封装数据
    bundle.putString("name","Ban");
    bundle.putChar("Sex",'M');
            //  传输包装
    intent.putExtras(bundle);
            //  执行意图
    startActivity(intent);
}

        /************ 2. 接受数据 *************/
             // 获取意图
        Intent intent = getIntent();
            // 获取封装数据（自动拆开 Bundle )
        String name = intent.getStringExtra("name");
        char sex = intent.getCharExtra("Sex",'A');
            //  打印数据
        Toast.makeText(this,"name : "+name+"  Sex :"+sex,Toast.LENGTH_SHORT).show();
```

### （二）传输对象数据 - MainActivity –> Activity1

 自定义对象数据用 Intent 传输时，该对象必须成为 Serializable 接口 / Parcelable 的对象，才能被传输。

 a. android 推荐使用 Parcelable ，性能高，支持兼容安卓虚拟机

 b.Serializable 用于 JVM 平台 Java开发

#### 一）数据对象实现 Serializable 接口

```
JAVA

// 1.一单个传输 Student 数据对象
             /*************** 1. 定义数据对象 *****************/
public class Student implements Serializable {

    String name;
    char sex;

    public Student(String name, char sex) {
        this.name = name;
        this.sex = sex;
    }
    public String getName() {
        return name;
    }
    public char getSex() {
        return sex;
    }
}

             /*************** 2. 传输数据对象 *****************/
                      // 新建跳转意图
          Intent intent = new Intent(this,Activity1.class);
                     // 初始化数据对象
          Student s1 = new Student("Ban1", '0');
                     // 传输数据
          intent.putExtra("Student",s1);
                    // 自行意图
           startActivity(intent);

           /*************** 3. 接受数据对象 *****************/
                // 获取意图
           Intent intent = getIntent();
               // 获取对象数据
        Student student = (Student) intent.getSerializableExtra("Student");


// 2.Bundle包装 传输 Student 数据对象
           /*************** 1. 定义数据对象 *****************/
public void ToActivity1(View view){
                    // 新建跳转意图
        Intent intent = new Intent(this,Activity1.class);
                    // 新建 Bundle 包装数据
        Bundle bundle = new Bundle();
                    // 初始化数据
        Student s1 = new Student("Ban1", '1');
        Student s2 = new Student("Ban2", '2');
        Student s3 = new Student("Ban3", '3');
                    // 封装数据
        bundle.putSerializable("S1",s1);
        bundle.putSerializable("S2",s2);
        bundle.putSerializable("S3",s3);
                   // 传输包裹
        intent.putExtras(bundle);
                   // 实现意图
        startActivity(intent);
    }
```

#### 二）数据对象实现 Parcelable 接口

[![image-20220404133202666](C:/Users/banjinbaliang/AppData/Roaming/Typora/typora-user-images/image-20220404133202666.png)](file:///C:/Users/banjinbaliang/AppData/Roaming/Typora/typora-user-images/image-20220404133202666.png)

```
JAVA

 // 1. 单个传输
             /******************* 1.定义数据对象 ********************/
public class Student implements Parcelable {
    String name;
    char sex;
    
    // 顺序必须和 writeToParcel 里面的一致
    protected Student(Parcel in) {
        name = in.readString();
        sex = (char) in.readInt();
    }
    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeString(name);
        dest.writeInt((int) sex);
    }
    @Override
    public int describeContents() {
        return 0;
    }
    public static final Creator<Student> CREATOR = new Creator<Student>() {
        // 创建 Student 对象，并构建好 Parcel 对象 in , 传递给 Student 对象，
        @Override
        public Student createFromParcel(Parcel in) {
            return new Student(in);
        }
        // 辅助函数
        @Override
        public Student[] newArray(int size) {
            return new Student[size];
        }
    };
     public Student(String name, char sex) {
        this.name = name;
        this.sex = sex;
    }
    public String getName() {
        return name;
    }
    public char getSex() {
        return sex;
    }
}
          /******************* 2.传输数据对象 ********************/
 public void ToActivity1(View view){
                // 新建意图
        Intent intent = new Intent(this, Activity1.class);
               // 初始化数据
        Student s1 = new Student("Ban", 'M');
               // 传输数据
        intent.putExtra("S1",s1);
               // 执行意图
        startActivity(intent);
    }
          /******************* 3.获取数据对象 ********************/
                // 获取意图
            Intent intent = getIntent();
               // 获取数据对象
            Student s1 = intent.getParcelableExtra("S1");  // 不需要强转
             

 // 2. Bundle 封装数据对象传输
          /******************* 1.定义数据对象 ********************/
                                 略
          /******************* 2.传输数据对象 ********************/
public void ToActivity1(View view){
                  // 新建意图
        Intent intent = new Intent(this, Activity1.class);
                 // 新建 Bundle 封装数据
        Bundle bundle = new Bundle();
                // 初始化数据
        Student s1 = new Student("Ban", '1');
        Student s2 = new Student("Ban", '2');
        Student s3 = new Student("Ban", '3');
                // 封装数据
        bundle.putParcelable("S1",s1);
        bundle.putParcelable("S2",s2);
        bundle.putParcelable("S3",s3);
                // 意图携带数据包裹
        intent.putExtras(bundle);
                // 执行意图
        startActivity(intent);
    }

        /******************* 3.获取数据对象 ********************/
                // 获取意图
            Intent intent = getIntent();
               // 获取数据对象
            Student s1 = intent.getParcelableExtra("S1");  // 不需要强转
            Student s2 = intent.getParcelableExtra("S2");  // 不需要强转
            Student s3 = intent.getParcelableExtra("S3");  // 不需要强转
 
```





## 六、Glide

 快速、高效的Android图片加载库，可自动加载网络、本地文件，app中的图片，助于平滑滚动
